<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Panel admina – Elektrycy (Logi Offline)</title>
<style>
body { font-family: Arial, sans-serif; background:#f4f6f8; padding:20px; }
table { width:100%; border-collapse:collapse; background:#fff; margin-bottom:20px; }
th, td { border:1px solid #ddd; padding:8px; font-size:13px; }
th { background:#222; color:#fff; }
input, select { width:100%; box-sizing:border-box; }
button { padding:6px 10px; cursor:pointer; background:#2ecc71; border:none; color:#fff; }
#loginBox { max-width:360px;margin:20px auto;padding:20px;background:#fff;border:1px solid #ddd; }
#logBox { max-width:800px;margin:20px auto;padding:10px;background:#eee;color:#222;font-family:monospace; min-height:150px; overflow-y:auto; border:1px solid #ccc; }
#adminPanel { display:none; }
</style>
</head>
<body>

<div id="loginBox">
  <h2>Logowanie admin (Offline Logi)</h2>
  <input id="email" type="email" placeholder="Email" style="margin-bottom:10px">
  <input id="password" type="password" placeholder="Hasło" style="margin-bottom:10px">
  <button id="loginBtn">Zaloguj</button>
  <p id="loginError" style="color:red"></p>
</div>

<div id="adminPanel">
<h1>Panel admina – tabela_elektrykow</h1>
<table>
<thead>
<tr>
<th>LP</th>
<th>Imię</th>
<th>Nazwisko</th>
<th>Miasto</th>
<th>Woj.</th>
<th>nr E</th>
<th>nr E + Pomiary</th>
<th>nr D</th>
<th>Status</th>
<th>Gwiazdki</th>
<th>Telefon</th>
<th>Email</th>
<th>Pokaż kontakt</th>
<th>Zapisz</th>
</tr>
</thead>
<tbody id="tbody"></tbody>
</table>
</div>

<div id="logBox"></div>

<script>
// --- FUNKCJA LOGÓW ---
function log(msg, type="log") {
  const logBox = document.getElementById("logBox");
  const div = document.createElement("div");
  div.textContent = `[${new Date().toLocaleTimeString()}] ${msg}`;
  if(type==="error") div.style.color="#f00";
  logBox.appendChild(div);
  logBox.scrollTop = logBox.scrollHeight;
}

// --- DANE TESTOWE (offline) ---
let fakeData = [
  { id:1, "lp.":1, imie:"Blanka", nazwisko:"Janukowicz", miasto:"269", wojewodztwo:"4", nrE:"g", nrEPomiary:"", nrD:"", status:"✅", gwiazdki:"⭐", telefon:"123456789", email:"blanka.janukowicz@gmail.com", show_contact:true },
  { id:2, "lp.":2, imie:"Piotr", nazwisko:"Janukowicz", miasto:"270", wojewodztwo:"4", nrE:"h", nrEPomiary:"", nrD:"", status:"❌", gwiazdki:"⭐⭐", telefon:"987654321", email:"piotr.janukowicz@gmail.com", show_contact:false }
];

// --- LOGIN ---
const adminEmail = "piotr8040@gmail.com";
async function login() {
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;
  log(`Kliknięto Zaloguj. Email: ${email}, Hasło: ${"*".repeat(password.length)}`);

  // --- SPRAWDZENIE DANYCH OFFLINE ---
  if(email === adminEmail && password === "admin123") {
    log("Logowanie poprawne (offline test)");
    document.getElementById("loginBox").style.display = "none";
    document.getElementById("adminPanel").style.display = "block";
    loadData();
  } else {
    log("Błędne dane logowania", "error");
    document.getElementById("loginError").innerText = "Błędne dane logowania (offline)";
  }
}

// --- ŁADOWANIE DANYCH OFFLINE ---
function loadData() {
  log("Ładowanie danych (offline)...");
  const tbody = document.getElementById("tbody");
  tbody.innerHTML = "";

  fakeData.forEach(row => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td><input value="${row['lp.']}"></td>
      <td><input value="${row.imie}"></td>
      <td><input value="${row.nazwisko}"></td>
      <td><input value="${row.miasto}"></td>
      <td><input value="${row.wojewodztwo}"></td>
      <td><input value="${row.nrE}"></td>
      <td><input value="${row.nrEPomiary}"></td>
      <td><input value="${row.nrD}"></td>
      <td><input value="${row.status}"></td>
      <td><input value="${row.gwiazdki}"></td>
      <td><input value="${row.telefon}"></td>
      <td><input value="${row.email}"></td>
      <td style="text-align:center"><input type="checkbox" ${row.show_contact ? 'checked' : ''}></td>
      <td><button>Zapisz</button></td>
    `;

    tr.querySelector("button").onclick = () => {
      log(`Kliknięto Zapisz dla id=${row.id}`);
      alert("Zapisano (offline test)");
    };

    tbody.appendChild(tr);
  });
}

// --- PRZYPISANIE PRZYCISKU ---
document.getElementById("loginBtn").addEventListener("click", login);
</script>

</body>
</html>