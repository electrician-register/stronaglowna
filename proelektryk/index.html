<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Supabase Signup ‚Äì DIAGNOZA</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  font-family: monospace;
  background: #111;
  color: #0f0;
  padding: 10px;
}
#log {
  white-space: pre-wrap;
  border: 1px solid #0f0;
  padding: 10px;
  min-height: 220px;
}
input, button {
  width: 100%;
  padding: 12px;
  margin-top: 8px;
  font-size: 16px;
}
button {
  background: #0B5FA5;
  color: #fff;
  border: none;
}
</style>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
window.onerror = function(msg, src, line) {
  document.getElementById("log").textContent +=
    "‚ùå JS ERROR:\n" + msg + "\n" + src + ":" + line + "\n";
};
</script>
</head>

<body>

<h3>SUPABASE SIGNUP ‚Äì TEST</h3>

<input id="email" type="email" placeholder="email@test.pl">
<input id="password" type="password" placeholder="has≈Ço min. 6 znak√≥w">

<button onclick="signup()">WY≈öLIJ EMAIL POTWIERDZAJƒÑCY</button>

<div id="log">üü¢ HTML ZA≈ÅADOWANY\n</div>

<script>
document.getElementById("log").textContent += "üü¢ JS AKTYWNY\n";

if (!window.supabase) {
  document.getElementById("log").textContent += "‚ùå SUPABASE NIE ZA≈ÅADOWANY\n";
} else {
  document.getElementById("log").textContent += "üü¢ SUPABASE ZA≈ÅADOWANY\n";
}

const supabase = window.supabase.createClient(
  "https://tfbqqduxtsacvwfigsvt.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRmYnFxZHV4dHNhY3Z3Zmlnc3Z0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY2OTE4NzcsImV4cCI6MjA4MjI2Nzg3N30.PhuNnwzQ8cZW_UyUjCxXaYAj7xCCiTnOJVd4fUtQRD8"
);

document.getElementById("log").textContent += "üü¢ CLIENT UTWORZONY\n";

async function signup() {
  const log = document.getElementById("log");
  log.textContent += "üëâ KLIK SIGNUP\n";

  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;

  log.textContent += "üì® EMAIL: " + email + "\n";

  try {
    const { data, error } = await supabase.auth.signUp({
      email,
      password,
      options: {
        emailRedirectTo: "https://orep.pl/proelektryk/"
      }
    });

    if (error) {
      log.textContent += "‚ùå SUPABASE ERROR:\n" + error.message + "\n";
    } else {
      log.textContent += "‚úÖ EMAIL POTWIERDZAJƒÑCY WYS≈ÅANY\n";
      log.textContent += JSON.stringify(data, null, 2) + "\n";
    }
  } catch (e) {
    log.textContent += "üî• EXCEPTION:\n" + e.message + "\n";
  }
}
</script>

</body>
</html>
