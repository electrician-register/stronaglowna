<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåê Pobieracz Kod√≥w HTML</title>
    <style>
        /* üé® STYLE - kolorowa wersja */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        /* üü¶ NAG≈Å√ìWEK */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        /* üü© SEKCJA WEJ≈öCIOWA */
        .input-section {
            padding: 30px;
            background: #f8f9fa;
            border-bottom: 3px solid #e9ecef;
        }
        
        .url-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .url-input-group input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .url-input-group input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102,126,234,0.1);
        }
        
        /* üü® PRZYCISKI */
        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5a67d8;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102,126,234,0.4);
        }
        
        .btn-success {
            background: #48bb78;
            color: white;
        }
        
        .btn-success:hover {
            background: #38a169;
            transform: translateY(-2px);
        }
        
        .btn-warning {
            background: #f6ad55;
            color: white;
        }
        
        .btn-warning:hover {
            background: #ed8936;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: #cbd5e0;
            color: #2d3748;
        }
        
        .btn-secondary:hover {
            background: #a0aec0;
        }
        
        /* üüß SEKCJA WYNIK√ìW */
        .results-section {
            padding: 30px;
        }
        
        .stats {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .stat-card {
            flex: 1;
            min-width: 150px;
            padding: 20px;
            border-radius: 10px;
            color: white;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .stat-card.blue { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .stat-card.green { background: linear-gradient(135deg, #48bb78 0%, #38a169 100%); }
        .stat-card.orange { background: linear-gradient(135deg, #f6ad55 0%, #ed8936 100%); }
        .stat-card.purple { background: linear-gradient(135deg, #9f7aea 0%, #805ad5 100%); }
        
        .stat-card .number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-card .label {
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        /* üü™ ZAK≈ÅADKI */
        .tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e9ecef;
        }
        
        .tab {
            padding: 12px 25px;
            background: none;
            border: none;
            font-size: 16px;
            font-weight: 600;
            color: #718096;
            cursor: pointer;
            position: relative;
        }
        
        .tab.active {
            color: #667eea;
        }
        
        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: #667eea;
        }
        
        /* üü¶ OBSZARY WY≈öWIETLANIA */
        .code-area {
            background: #1a202c;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            overflow-x: auto;
            max-height: 500px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
        }
        
        .html-output {
            background: #1e1e1e;
            color: #d4d4d4;
        }
        
        .preview-area {
            background: white;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            min-height: 200px;
            max-height: 500px;
            overflow-y: auto;
        }
        
        .headers-area {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }
        
        /* üü• STATUS */
        .status {
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-weight: 500;
        }
        
        .status.info {
            background: #bee3f8;
            color: #2c5282;
            border-left: 4px solid #3182ce;
        }
        
        .status.success {
            background: #c6f6d5;
            color: #22543d;
            border-left: 4px solid #38a169;
        }
        
        .status.error {
            background: #fed7d7;
            color: #742a2a;
            border-left: 4px solid #e53e3e;
        }
        
        .status.warning {
            background: #feebc8;
            color: #744210;
            border-left: 4px solid #dd6b20;
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- üü¶ NAG≈Å√ìWEK -->
        <div class="header">
            <h1>üåê Pobieracz Kod√≥w HTML</h1>
            <p>Wpisz adres URL strony, a ja pobiorƒô i wy≈õwietlƒô jej kod ≈∫r√≥d≈Çowy</p>
        </div>
        
        <!-- üü© SEKCJA WEJ≈öCIOWA -->
        <div class="input-section">
            <div class="url-input-group">
                <input type="url" id="urlInput" 
                       placeholder="https://example.com" 
                       value="https://www.tauron.pl/tauron/o-tauronie/kariera/oferty-pracy?psize=15&workplace=krak%C3%B3w&career_level=stanowisko%20fizyczne">
                <button class="btn btn-primary" onclick="fetchWebsite()">
                    <span>‚¨áÔ∏è</span> Pobierz stronƒô
                </button>
            </div>
            
            <!-- üü® PRZYCISKI DODATKOWE -->
            <div class="button-group">
                <button class="btn btn-success" onclick="fetchWithProxy()">
                    <span>üîÑ</span> Pobierz przez proxy (CORS)
                </button>
                <button class="btn btn-warning" onclick="fetchWithCorsAnywhere()">
                    <span>üåç</span> cors-anywhere (demo)
                </button>
                <button class="btn btn-secondary" onclick="clearAll()">
                    <span>üóëÔ∏è</span> Wyczy≈õƒá wszystko
                </button>
            </div>
        </div>
        
        <!-- üüß SEKCJA STATUSU -->
        <div id="statusMessage" class="status info">
            ‚è≥ Gotowy do pracy. Wpisz URL i kliknij "Pobierz stronƒô"
        </div>
        
        <!-- üü™ SEKCJA WYNIK√ìW -->
        <div class="results-section">
            <!-- üìä STATYSTYKI -->
            <div class="stats" id="stats" style="display: none;">
                <div class="stat-card blue">
                    <div class="number" id="statSize">0</div>
                    <div class="label">Rozmiar (bajty)</div>
                </div>
                <div class="stat-card green">
                    <div class="number" id="statLines">0</div>
                    <div class="label">Linie kodu</div>
                </div>
                <div class="stat-card orange">
                    <div class="number" id="statElements">0</div>
                    <div class="label">Znaczniki HTML</div>
                </div>
                <div class="stat-card purple">
                    <div class="number" id="statTime">0</div>
                    <div class="label">Czas (ms)</div>
                </div>
            </div>
            
            <!-- üìå ZAK≈ÅADKI -->
            <div class="tabs">
                <button class="tab active" onclick="switchTab('html')">üìÑ Kod HTML</button>
                <button class="tab" onclick="switchTab('preview')">üëÅÔ∏è PodglƒÖd strony</button>
                <button class="tab" onclick="switchTab('headers')">üìã Nag≈Ç√≥wki HTTP</button>
                <button class="tab" onclick="switchTab('raw')">üîß Surowe dane</button>
            </div>
            
            <!-- üü¶ ZAK≈ÅADKA: KOD HTML -->
            <div id="tabHtml" class="tab-content">
                <div class="code-area html-output" id="htmlOutput">
                    Kliknij "Pobierz stronƒô", aby zobaczyƒá kod HTML...
                </div>
            </div>
            
            <!-- üü© ZAK≈ÅADKA: PODGLƒÑD -->
            <div id="tabPreview" class="tab-content hidden">
                <div class="preview-area" id="previewOutput">
                    <iframe id="previewFrame" style="width: 100%; height: 100%; border: none;"></iframe>
                </div>
            </div>
            
            <!-- üü® ZAK≈ÅADKA: NAG≈Å√ìWKI -->
            <div id="tabHeaders" class="tab-content hidden">
                <div class="headers-area" id="headersOutput"></div>
            </div>
            
            <!-- üüß ZAK≈ÅADKA: SUROWE DANE -->
            <div id="tabRaw" class="tab-content hidden">
                <div class="code-area" id="rawOutput"></div>
            </div>
        </div>
    </div>
    
    <script>
        // ============================================
        // üü¶ G≈Å√ìWNE ZMIENNE
        // ============================================
        let currentHtml = '';
        let currentHeaders = {};
        let startTime = 0;
        
        // ============================================
        // üü© G≈Å√ìWNA FUNKCJA POBIRAJƒÑCA
        // ============================================
        async function fetchWebsite() {
            const url = document.getElementById('urlInput').value.trim();
            
            if (!url) {
                showStatus('error', '‚ùå Wpisz adres URL strony!');
                return;
            }
            
            try {
                startTime = performance.now();
                showStatus('info', `‚è≥ Pobieranie strony: ${url}...`);
                
                // üü® Pobieranie danych
                const response = await fetch(url, {
                    headers: {
                        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
                        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
                        'Accept-Language': 'pl,en-US;q=0.7,en;q=0.3'
                    }
                });
                
                // üüß Konwersja nag≈Ç√≥wk√≥w
                const headers = {};
                response.headers.forEach((value, key) => {
                    headers[key] = value;
                });
                currentHeaders = headers;
                
                // üü™ Pobranie tre≈õci
                const html = await response.text();
                currentHtml = html;
                
                // üìä Aktualizacja statystyk
                updateStats(html, headers, response.status);
                
                // üü¶ Wy≈õwietlenie w zak≈Çadkach
                displayHtml(html);
                displayHeaders(headers, response.status);
                displayRaw(html, response);
                
                // üü© Przygotowanie podglƒÖdu
                setupPreview(html);
                
                // ‚úÖ Status sukcesu
                showStatus('success', `‚úÖ Pobrano pomy≈õlnie! Status: ${response.status} ${response.statusText}`);
                
            } catch (error) {
                console.error('B≈ÇƒÖd:', error);
                showStatus('error', `‚ùå B≈ÇƒÖd: ${error.message}`);
                currentHtml = '';
                
                // ‚ùå Informacja o CORS
                if (error.message.includes('CORS')) {
                    showStatus('error', 'üåê B≈ÇƒÖd CORS! U≈ºyj przycisku "Pobierz przez proxy"');
                }
            }
        }
        
        // ============================================
        // üü® FUNKCJA Z PROXY (obej≈õcie CORS)
        // ============================================
        async function fetchWithProxy() {
            const url = document.getElementById('urlInput').value.trim();
            if (!url) {
                showStatus('error', '‚ùå Wpisz adres URL!');
                return;
            }
            
            try {
                showStatus('info', '‚è≥ Pobieranie przez proxy (cors.sh)...');
                
                // U≈ºycie serwisu proxy cors.sh
                const proxyUrl = `https://api.cors.sh/${url}`;
                
                const response = await fetch(proxyUrl, {
                    headers: {
                        'x-cors-api-key': 'temp_123456', // W rzeczywisto≈õci trzeba by mieƒá klucz
                        'Origin': window.location.origin
                    }
                });
                
                const html = await response.text();
                currentHtml = html;
                
                displayHtml(html);
                showStatus('success', '‚úÖ Pobrano przez proxy!');
                
            } catch (error) {
                showStatus('error', `‚ùå B≈ÇƒÖd proxy: ${error.message}`);
            }
        }
        
        // ============================================
        // üü™ FUNKCJA Z CORS-ANYWHERE (demo)
        // ============================================
        async function fetchWithCorsAnywhere() {
            const url = document.getElementById('urlInput').value.trim();
            if (!url) {
                showStatus('error', '‚ùå Wpisz adres URL!');
                return;
            }
            
            try {
                showStatus('info', '‚è≥ Pr√≥bujƒô cors-anywhere (publiczne demo)...');
                
                // Publiczne demo cors-anywhere (mo≈ºe byƒá wolne)
                const proxyUrl = `https://cors-anywhere.herokuapp.com/${url}`;
                
                const response = await fetch(proxyUrl);
                const html = await response.text();
                
                currentHtml = html;
                displayHtml(html);
                showStatus('success', '‚úÖ Pobrano przez cors-anywhere!');
                
            } catch (error) {
                showStatus('error', `‚ùå B≈ÇƒÖd cors-anywhere: ${error.message}`);
            }
        }
        
        // ============================================
        // üü¶ FUNKCJE WY≈öWIETLAJƒÑCE
        // ============================================
        
        // üìÑ Wy≈õwietlenie HTML z kolorowaniem sk≈Çadni
        function displayHtml(html) {
            const output = document.getElementById('htmlOutput');
            
            // Proste kolorowanie sk≈Çadni (dla czytelno≈õci)
            let coloredHtml = html
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/&lt;(\/?\w+)(.*?)&gt;/g, (match, tag, attrs) => {
                    return `<span style="color: #569cd6;">&lt;${tag}${attrs}&gt;</span>`;
                })
                .replace(/"([^"]*)"/g, '<span style="color: #ce9178;">"$1"</span>');
            
            output.innerHTML = coloredHtml || '<span style="color: #808080;">(pusty HTML)</span>';
        }
        
        // üìã Wy≈õwietlenie nag≈Ç√≥wk√≥w
        function displayHeaders(headers, status) {
            const output = document.getElementById('headersOutput');
            let html = `<span style="color: #ffd700;">HTTP/1.1 ${status}</span>\n\n`;
            
            for (const [key, value] of Object.entries(headers)) {
                html += `<span style="color: #9cdcfe;">${key}:</span> <span style="color: #ce9178;">${value}</span>\n`;
            }
            
            output.innerHTML = html;
        }
        
        // üîß Wy≈õwietlenie surowych danych
        function displayRaw(html, response) {
            const output = document.getElementById('rawOutput');
            output.textContent = `URL: ${response.url}\nStatus: ${response.status}\nType: ${response.headers.get('content-type')}\n\n${html.substring(0, 5000)}${html.length > 5000 ? '... (przyciƒôto)' : ''}`;
        }
        
        // üëÅÔ∏è Przygotowanie podglƒÖdu
        function setupPreview(html) {
            const iframe = document.getElementById('previewFrame');
            iframe.srcdoc = html;
        }
        
        // ============================================
        // üìä FUNKCJE STATYSTYK
        // ============================================
        function updateStats(html, headers, status) {
            document.getElementById('stats').style.display = 'flex';
            
            const size = new Blob([html]).size;
            const lines = html.split('\n').length;
            const tags = (html.match(/<\/?\w+/g) || []).length;
            const time = Math.round(performance.now() - startTime);
            
            document.getElementById('statSize').textContent = formatBytes(size);
            document.getElementById('statLines').textContent = lines;
            document.getElementById('statElements').textContent = tags;
            document.getElementById('statTime').textContent = time + 'ms';
        }
        
        function formatBytes(bytes) {
            if (bytes < 1024) return bytes + ' B';
            if (bytes < 1024*1024) return (bytes/1024).toFixed(1) + ' KB';
            return (bytes/(1024*1024)).toFixed(1) + ' MB';
        }
        
        // ============================================
        // üü® FUNKCJE POMOCNICZE
        // ============================================
        
        // üîÑ Prze≈ÇƒÖczanie zak≈Çadek
        function switchTab(tab) {
            // Ukryj wszystkie zak≈Çadki
            document.querySelectorAll('.tab-content').forEach(el => {
                el.classList.add('hidden');
            });
            
            // Poka≈º wybranƒÖ
            document.getElementById(`tab${tab.charAt(0).toUpperCase() + tab.slice(1)}`).classList.remove('hidden');
            
            // Aktualizacja aktywnych przycisk√≥w
            document.querySelectorAll('.tab').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }
        
        // üì¢ Wy≈õwietlenie statusu
        function showStatus(type, message) {
            const statusEl = document.getElementById('statusMessage');
            statusEl.className = `status ${type}`;
            statusEl.textContent = message;
        }
        
        // üóëÔ∏è Czyszczenie wszystkiego
        function clearAll() {
            currentHtml = '';
            currentHeaders = {};
            
            document.getElementById('htmlOutput').innerHTML = 'Kod HTML zosta≈Ç wyczyszczony...';
            document.getElementById('headersOutput').innerHTML = '';
            document.getElementById('rawOutput').innerHTML = '';
            document.getElementById('previewFrame').srcdoc = '';
            document.getElementById('stats').style.display = 'none';
            
            showStatus('info', 'üîÑ Wszystko wyczyszczone. Gotowy do nowego pobierania.');
        }
        
        // ============================================
        // üü™ DODATKOWA FUNKCJA - PARSOWANIE OFERT TAURON
        // ============================================
        function parseTauronOffers() {
            if (!currentHtml) {
                showStatus('warning', '‚ö†Ô∏è Najpierw pobierz stronƒô Tauron!');
                return;
            }
            
            try {
                showStatus('info', 'üîç Parsowanie ofert Tauron...');
                
                // üü® Szukanie tabeli z ofertami
                const tableRegex = /<table[^>]*>([\s\S]*?)<\/table>/i;
                const tableMatch = currentHtml.match(tableRegex);
                
                if (!tableMatch) {
                    showStatus('warning', '‚ö†Ô∏è Nie znaleziono tabeli z ofertami!');
                    return;
                }
                
                // üüß Dzielenie na wiersze
                const tableContent = tableMatch[1];
                const rowRegex = /<tr[^>]*>([\s\S]*?)<\/tr>/gi;
                const rows = tableContent.match(rowRegex) || [];
                
                // üü™ Przetwarzanie ofert
                const offers = [];
                
                for (const row of rows) {
                    // Pomi≈Ñ nag≈Ç√≥wek
                    if (row.includes('<th')) continue;
                    
                    // WyciƒÖgnij kom√≥rki
                    const cellRegex = /<t[d|h][^>]*>([\s\S]*?)<\/t[d|h]>/gi;
                    const cells = row.match(cellRegex) || [];
                    
                    if (cells.length >= 7) {
                        // Wyczy≈õƒá tekst z HTML
                        const cleanText = (text) => {
                            return text.replace(/<[^>]*>/g, '').replace(/\s+/g, ' ').trim();
                        };
                        
                        const cleaned = cells.map(cell => cleanText(cell));
                        
                        offers.push({
                            stanowisko: cleaned[0] || '',
                            poziom: cleaned[1] || '',
                            miejsce: cleaned[2] || '',
                            spolka: cleaned[3] || '',
                            forma: cleaned[4] || '',
                            waznosc: cleaned[5] || '',
                            ref: cleaned[6] || ''
                        });
                    }
                }
                
                // ‚úÖ Wy≈õwietl wyniki
                if (offers.length > 0) {
                    let result = `üîç Znaleziono ${offers.length} ofert:\n\n`;
                    offers.forEach((offer, i) => {
                        result += `${i+1}. ${offer.stanowisko} (${offer.ref})\n`;
                        result += `   üìç ${offer.miejsce} | üìÖ ${offer.waznosc}\n\n`;
                    });
                    
                    alert(result);
                    showStatus('success', `‚úÖ Znaleziono ${offers.length} ofert!`);
                } else {
                    showStatus('warning', '‚ö†Ô∏è Nie znaleziono ≈ºadnych ofert!');
                }
                
            } catch (error) {
                showStatus('error', `‚ùå B≈ÇƒÖd parsowania: ${error.message}`);
            }
        }
    </script>
    
    <!-- üü¶ DODATKOWY PANEL NARZƒòDZIOWY (na dole) -->
    <div style="margin-top: 20px; text-align: center;">
        <button class="btn btn-primary" onclick="parseTauronOffers()" style="background: #9f7aea;">
            üîç Parsuj oferty Tauron
        </button>
        <button class="btn btn-secondary" onclick="fetch('https://api.github.com/repos/tauron-praca')">
            üåü Test API
        </button>
    </div>
</body>
</html>