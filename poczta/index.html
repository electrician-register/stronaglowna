<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML Viewer</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: black; font-family: 'Courier New', monospace; height: 100vh; display: flex; flex-direction: column; }
        .address-bar { padding: 10px; border-bottom: 1px solid #333; background: #111; }
        .address-bar input { width: 100%; padding: 8px; font-family: 'Courier New', monospace; font-size: 14px; background: #222; color: white; border: 1px solid #444; outline: none; }
        .address-bar input:focus { border-color: #0066cc; }
        .code-container { flex: 1; overflow: auto; background: black; padding: 15px; }
        pre { margin: 0; font-family: 'Courier New', monospace; font-size: 13px; line-height: 1.5; white-space: pre-wrap; word-wrap: break-word; color: white; }
        .tag { color: #569cd6; } .attr { color: #9cdcfe; } .value { color: #ce9178; } .comment { color: #6a9955; } .text { color: #d4d4d4; } .doctype { color: #808080; }
    </style>
</head>
<body>
    <div class="address-bar">
        <input type="text" id="urlInput" placeholder="Wpisz adres strony i naciśnij Enter" value="" onkeypress="if(event.key==='Enter') fetchHTML()">
    </div>
    <div class="code-container">
        <pre id="codeOutput"></pre>
    </div>
    <script>
        const PROXIES = [
            'https://api.allorigins.win/raw?url=',
            'https://cors-anywhere.herokuapp.com/',
            'https://thingproxy.freeboard.io/fetch/',
            'https://api.codetabs.com/v1/proxy?quest='
        ];
        
        const urlInput = document.getElementById('urlInput');
        const codeOutput = document.getElementById('codeOutput');
        
        async function fetchHTML() {
            const url = urlInput.value.trim();
            if (!url) return;
            
            codeOutput.innerHTML = 'Pobieranie...';
            
            for (let i = 0; i < PROXIES.length; i++) {
                try {
                    const response = await fetch(PROXIES[i] + encodeURIComponent(url), {
                        headers: { 'User-Agent': 'Mozilla/5.0' }
                    });
                    const html = await response.text();
                    if (html && html.includes('<')) {
                        colorizeHTML(html);
                        return;
                    }
                } catch (e) {
                    console.log('Proxy ' + i + ' failed');
                }
            }
            
            codeOutput.innerHTML = 'Nie można pobrać strony - spróbuj inny adres';
        }
        
        function colorizeHTML(html) {
            let escaped = html.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
            escaped = escaped.replace(/&lt;!DOCTYPE.*?&gt;/gi, m => `<span class="doctype">${m}</span>`);
            escaped = escaped.replace(/&lt;!--.*?--&gt;/g, m => `<span class="comment">${m}</span>`);
            escaped = escaped.replace(/&lt;(\/?)(\w+)(.*?)(\/?)&gt;/g, (m, s, t, a, sc) => {
                let ca = a.replace(/(\s+)(\w+)(\s*=\s*)(&quot;.*?&quot;|'.*?')/g, (m, sp, at, eq, v) => `${sp}<span class="attr">${at}</span>${eq}<span class="value">${v}</span>`);
                ca = ca.replace(/(\s+)(\w+)(?!\s*=)/g, (m, sp, at) => `${sp}<span class="attr">${at}</span>`);
                return `&lt;${s}<span class="tag">${t}</span>${ca}${sc}&gt;`;
            });
            escaped = escaped.replace(/(&gt;)(.*?)(&lt;)/g, (m, c, t, o) => t.trim() ? c + '<span class="text">' + t + '</span>' + o : m);
            codeOutput.innerHTML = escaped;
        }
        
        urlInput.focus();
    </script>
</body>
</html>