<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåà Kolorowy HTML - bia≈Çe t≈Ço</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #f5f5f5;  /* üü¢ ZMIENIONE: jasnoszare t≈Ço strony */
            font-family: 'Segoe UI', 'Courier New', monospace;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* Pasek adresu */
        .address-bar {
            background: #2d2d2d;
            padding: 15px 20px;
            display: flex;
            gap: 10px;
            border-bottom: 2px solid #3d3d3d;
        }
        
        .address-bar input {
            flex: 1;
            background: #3d3d3d;
            border: none;
            padding: 12px 20px;
            color: white;
            font-size: 14px;
            border-radius: 25px;
            outline: none;
            font-family: 'Courier New', monospace;
        }
        
        .address-bar input:focus {
            background: #4d4d4d;
            box-shadow: 0 0 0 2px #007acc;
        }
        
        .address-bar button {
            background: #007acc;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            min-width: 120px;
        }
        
        .address-bar button:hover {
            background: #005a9e;
        }
        
        /* Pasek informacji */
        .info-bar {
            background: #252526;
            color: #969696;
            padding: 5px 20px;
            font-size: 12px;
            display: flex;
            gap: 20px;
            border-bottom: 1px solid #3d3d3d;
        }
        
        .info-item span {
            color: #4ec9b0;
            margin-left: 5px;
        }
        
        /* üü¢ OBSZAR KODU - BIA≈ÅE T≈ÅO */
        .code-container {
            flex: 1;
            overflow: auto;
            background: #ffffff;  /* üü¢ ZMIENIONE: bia≈Çe t≈Ço dla kodu */
            padding: 20px;
        }
        
        pre {
            margin: 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
        }
        
        /* Kolory sk≈Çadni - dostosowane do bia≈Çego t≈Ça */
        .tag { color: #0000cc; }        /* Ciemnoniebieski */
        .attr { color: #0066cc; }       /* Niebieski */
        .value { color: #cc6600; }      /* Pomara≈Ñczowy */
        .comment { color: #006600; }    /* Ciemnozielony */
        .text { color: #000000; }       /* Czarny */
        .doctype { color: #666666; }    /* Szary */
        .error-text { color: #cc0000; } /* Czerwony */
        
        /* Status */
        .status {
            background: #2d2d2d;
            color: #d4d4d4;
            padding: 8px 20px;
            font-size: 12px;
            border-top: 1px solid #3d3d3d;
        }
        
        .status.error { background: #5a1e1e; color: #ff6b6b; }
        .status.success { background: #1e3a1e; color: #6bff6b; }
        .status.info { background: #1e3a5a; color: #6bb0ff; }
    </style>
</head>
<body>
    <div class="address-bar">
        <input type="text" id="urlInput" 
               placeholder="Wpisz adres strony i naci≈õnij Enter..." 
               value="https://www.tauron.pl/tauron/o-tauronie/kariera/oferty-pracy?psize=15&workplace=krak%C3%B3w&career_level=stanowisko%20fizyczne"
               onkeypress="if(event.key==='Enter') autoFetch()">
        <button onclick="autoFetch()" id="fetchBtn">Pobierz HTML</button>
    </div>
    
    <div class="info-bar" id="infoBar" style="display: none;">
        <div>üìÑ Rozmiar: <span id="sizeInfo">0 B</span></div>
        <div>üìä Linie: <span id="linesInfo">0</span></div>
        <div>üè∑Ô∏è Znaczniki: <span id="tagsInfo">0</span></div>
        <div>‚è±Ô∏è Czas: <span id="timeInfo">0ms</span></div>
        <div>üîß Status: <span id="statusInfo">OK</span></div>
    </div>
    
    <!-- üü¢ OBSZAR KODU - TERAZ Z BIA≈ÅYM T≈ÅEM -->
    <div class="code-container">
        <pre id="codeOutput"><span class="comment">&lt;!-- 
    üëÜ Wpisz adres strony i naci≈õnij Enter
    System automatycznie:
    ‚Ä¢ Wybierze odpowiednie proxy
    ‚Ä¢ Pobierze stronƒô
    ‚Ä¢ Pokoloruje kod
--&gt;</span></pre>
    </div>
    
    <div class="status" id="status">‚úÖ Gotowy - wpisz URL i naci≈õnij Enter</div>
    
    <script>
        (function() {
            // Lista proxy do automatycznego wyboru
            const PROXY_LIST = [
                'https://api.allorigins.win/raw?url=',
                'https://cors-anywhere.herokuapp.com/',
                'https://crossorigin.me/',
                'https://thingproxy.freeboard.io/fetch/',
                '' // last resort - bez proxy
            ];
            
            let currentProxyIndex = 0;
            let isFetching = false;
            
            const urlInput = document.getElementById('urlInput');
            const codeOutput = document.getElementById('codeOutput');
            const statusDiv = document.getElementById('status');
            const fetchBtn = document.getElementById('fetchBtn');
            const infoBar = document.getElementById('infoBar');
            const sizeSpan = document.getElementById('sizeInfo');
            const linesSpan = document.getElementById('linesInfo');
            const tagsSpan = document.getElementById('tagsInfo');
            const timeSpan = document.getElementById('timeInfo');
            const statusInfo = document.getElementById('statusInfo');
            
            // G≈Ç√≥wna funkcja - wszystko dzieje siƒô automatycznie
            async function autoFetch() {
                if (isFetching) return;
                
                const url = urlInput.value.trim();
                
                if (!url) {
                    showError('Wpisz adres URL!');
                    return;
                }
                
                isFetching = true;
                fetchBtn.disabled = true;
                fetchBtn.textContent = 'Pobieranie...';
                
                showStatus('info', 'üîÑ Pr√≥ba 1/5 - Szukam sposobu...');
                codeOutput.innerHTML = '<span class="comment">&lt;!-- ‚è≥ Pobieranie danych... --&gt;</span>';
                
                // Pr√≥buj kolejne proxy a≈º zadzia≈Ça
                for (let i = 0; i < PROXY_LIST.length; i++) {
                    currentProxyIndex = i;
                    const proxy = PROXY_LIST[i];
                    const proxyName = proxy ? new URL(proxy).hostname : 'bezpo≈õrednio';
                    
                    showStatus('info', `üîÑ Pr√≥ba ${i+1}/${PROXY_LIST.length} (${proxyName})...`);
                    
                    const success = await tryFetch(url, proxy);
                    
                    if (success) {
                        showStatus('success', `‚úÖ Pobrano przez: ${proxyName}`);
                        break;
                    }
                    
                    if (i === PROXY_LIST.length - 1) {
                        // Wszystkie proxy zawiod≈Çy - poka≈º przyk≈Çadowy kod
                        showExampleHTML();
                        showError('Nie mo≈ºna pobraƒá strony - pokazujƒô przyk≈Çad');
                    }
                }
                
                isFetching = false;
                fetchBtn.disabled = false;
                fetchBtn.textContent = 'Pobierz HTML';
            }
            
            // Pr√≥ba pobrania przez konkretne proxy
            async function tryFetch(url, proxy) {
                try {
                    const startTime = performance.now();
                    
                    let fetchUrl = proxy ? proxy + url : url;
                    
                    // Specjalna obs≈Çuga dla allorigins
                    if (proxy.includes('allorigins')) {
                        fetchUrl = proxy + encodeURIComponent(url);
                    }
                    
                    const response = await fetch(fetchUrl, {
                        headers: {
                            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
                            'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
                            'Accept-Language': 'pl,en-US;q=0.7,en;q=0.3'
                        }
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}`);
                    }
                    
                    let html = await response.text();
                    
                    // Sprawd≈∫ czy to na pewno HTML
                    if (!html.includes('<') && !html.includes('>')) {
                        throw new Error('To nie jest strona HTML');
                    }
                    
                    const time = Math.round(performance.now() - startTime);
                    
                    // Statystyki
                    const size = new Blob([html]).size;
                    const lines = html.split('\n').length;
                    const tags = (html.match(/<\/?\w+/g) || []).length;
                    
                    sizeSpan.textContent = formatBytes(size);
                    linesSpan.textContent = lines;
                    tagsSpan.textContent = tags;
                    timeSpan.textContent = time + 'ms';
                    statusInfo.textContent = response.status;
                    
                    infoBar.style.display = 'flex';
                    
                    // Kolorowanie
                    colorizeHTML(html);
                    
                    return true;
                    
                } catch (error) {
                    console.log(`Proxy ${proxy} failed:`, error.message);
                    return false;
                }
            }
            
            // Poka≈º przyk≈Çadowy HTML je≈õli wszystko zawiedzie
            function showExampleHTML() {
                const exampleHTML = `<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Przyk≈Çadowa strona TAURON</title>
    <style>
        body { font-family: Arial; }
        .offers { margin: 20px; }
        table { border-collapse: collapse; width: 100%; }
        th { background: #0057a3; color: white; padding: 10px; }
        td { padding: 10px; border: 1px solid #ddd; }
    </style>
</head>
<body>
    <div class="offers">
        <h1>Oferty pracy w Krakowie</h1>
        
        <!-- Tabela z ofertami -->
        <table>
            <tr>
                <th>Stanowisko</th>
                <th>Poziom</th>
                <th>Miejsce</th>
                <th>Sp√≥≈Çka</th>
                <th>Forma</th>
                <th>Wa≈ºne do</th>
                <th>Nr ref.</th>
            </tr>
            <tr>
                <td>Elektryk</td>
                <td>Fizyczne</td>
                <td>Krak√≥w</td>
                <td>Tauron Dystrybucja</td>
                <td>Umowa o pracƒô</td>
                <td>31.12.2024</td>
                <td>REF/2024/001</td>
            </tr>
            <tr>
                <td>Mechanik</td>
                <td>Fizyczne</td>
                <td>Krak√≥w</td>
                <td>Tauron Wytwarzanie</td>
                <td>Umowa o pracƒô</td>
                <td>15.01.2025</td>
                <td>REF/2024/002</td>
            </tr>
            <tr>
                <td>Automatyk</td>
                <td>Fizyczne</td>
                <td>Krak√≥w</td>
                <td>Tauron Serwis</td>
                <td>Umowa zlecenie</td>
                <td>30.01.2025</td>
                <td>REF/2024/003</td>
            </tr>
        </table>
        
        <!-- Komentarz -->
        <!-- To jest przyk≈Çadowa struktura strony Tauron -->
    </div>
</body>
</html>`;
                
                const size = new Blob([exampleHTML]).size;
                const lines = exampleHTML.split('\n').length;
                const tags = (exampleHTML.match(/<\/?\w+/g) || []).length;
                
                sizeSpan.textContent = formatBytes(size);
                linesSpan.textContent = lines;
                tagsSpan.textContent = tags;
                timeSpan.textContent = '0ms';
                statusInfo.textContent = 'PRZYK≈ÅAD';
                
                infoBar.style.display = 'flex';
                colorizeHTML(exampleHTML);
            }
            
            // Kolorowanie HTML
            function colorizeHTML(html) {
                let escaped = html
                    .replace(/&/g, '&amp;')
                    .replace(/</g, '&lt;')
                    .replace(/>/g, '&gt;');
                
                // DOCTYPE
                escaped = escaped.replace(/&lt;!DOCTYPE.*?&gt;/gi, match => {
                    return `<span class="doctype">${match}</span>`;
                });
                
                // Komentarze
                escaped = escaped.replace(/&lt;!--.*?--&gt;/g, match => {
                    return `<span class="comment">${match}</span>`;
                });
                
                // Znaczniki
                escaped = escaped.replace(/&lt;(\/?)(\w+)(.*?)(\/?)&gt;/g, (match, slash, tagName, attrs, selfClose) => {
                    let coloredAttrs = attrs.replace(/(\s+)(\w+)(\s*=\s*)(&quot;.*?&quot;|'.*?')/g, (m, space, attr, eq, value) => {
                        return `${space}<span class="attr">${attr}</span>${eq}<span class="value">${value}</span>`;
                    });
                    
                    coloredAttrs = coloredAttrs.replace(/(\s+)(\w+)(?!\s*=)/g, (m, space, attr) => {
                        return `${space}<span class="attr">${attr}</span>`;
                    });
                    
                    return `&lt;${slash}<span class="tag">${tagName}</span>${coloredAttrs}${selfClose}&gt;`;
                });
                
                // Tekst
                escaped = escaped.replace(/(&gt;)(.*?)(&lt;)/g, (m, close, text, open) => {
                    if (text.trim()) {
                        return close + '<span class="text">' + text + '</span>' + open;
                    }
                    return m;
                });
                
                codeOutput.innerHTML = escaped;
            }
            
            function showStatus(type, message) {
                statusDiv.className = 'status ' + type;
                statusDiv.textContent = message;
            }
            
            function showError(message) {
                statusDiv.className = 'status error';
                statusDiv.textContent = '‚ùå ' + message;
            }
            
            function formatBytes(bytes) {
                if (bytes < 1024) return bytes + ' B';
                if (bytes < 1024*1024) return (bytes/1024).toFixed(1) + ' KB';
                return (bytes/(1024*1024)).toFixed(1) + ' MB';
            }
            
            // Automatyczne proxy w tle
            window.autoFetch = autoFetch;
            
            // Dodaj przyk≈Çadowy URL przy starcie
            setTimeout(() => {
                autoFetch();
            }, 500);
        })();
    </script>
</body>
</html>