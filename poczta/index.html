<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML Viewer - Pełna składnia</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: black; font-family: 'Courier New', monospace; height: 100vh; display: flex; flex-direction: column; }
        .address-bar { padding: 10px; border-bottom: 1px solid #333; background: #111; }
        .address-bar input { width: 100%; padding: 8px; font-family: 'Courier New', monospace; font-size: 14px; background: #222; color: white; border: 1px solid #444; outline: none; }
        .address-bar input:focus { border-color: #0066cc; }
        .code-container { flex: 1; overflow: auto; background: black; padding: 15px; }
        pre { margin: 0; font-family: 'Courier New', monospace; font-size: 13px; line-height: 1.5; white-space: pre-wrap; word-wrap: break-word; color: white; }
        
        /* Znaczniki */
        .tag { color: #569cd6; }
        .script-tag { color: #ff6b6b; }
        .style-tag { color: #f0a500; }
        .link-tag { color: #6c5ce7; }
        .meta-tag { color: #00b894; }
        .self-closing { color: #fd79a8; }
        
        /* Atrybuty */
        .attr { color: #9cdcfe; }
        .event-attr { color: #e17055; }
        .data-attr { color: #74b9ff; }
        .aria-attr { color: #55efc4; }
        
        /* Wartości */
        .value { color: #ce9178; }
        
        /* Komentarze */
        .comment { color: #6a9955; }
        .js-comment { color: #6c5ce7; }
        
        /* Tekst */
        .text { color: #d4d4d4; }
        
        /* DOCTYPE */
        .doctype { color: #808080; }
        
        /* Encje */
        .entity { color: #a29bfe; }
        
        /* CSS */
        .css-selector { color: #e84393; }
        .css-property { color: #00cec9; }
        .css-value { color: #fdcb6e; }
        
        /* JavaScript */
        .js-keyword { color: #0984e3; }
        .js-string { color: #00b894; }
        .js-number { color: #fdcb6e; }
        .js-func { color: #e17055; }
        .js-var { color: #74b9ff; }
        .js-operator { color: #dfe6e9; }
        
        /* Linie */
        .line-numbers { color: #636e72; }
        
        /* Błędy */
        .error { color: #d63031; }
    </style>
</head>
<body>
    <div class="address-bar">
        <input type="text" id="urlInput" placeholder="Wpisz adres strony i naciśnij Enter" value="" onkeypress="if(event.key==='Enter') fetchHTML()">
    </div>
    <div class="code-container">
        <pre id="codeOutput"></pre>
    </div>
    <script>
        const PROXIES = [
            'https://api.allorigins.win/raw?url=',
            'https://cors-anywhere.herokuapp.com/',
            'https://thingproxy.freeboard.io/fetch/',
            'https://api.codetabs.com/v1/proxy?quest='
        ];
        
        const urlInput = document.getElementById('urlInput');
        const codeOutput = document.getElementById('codeOutput');
        
        async function fetchHTML() {
            const url = urlInput.value.trim();
            if (!url) return;
            
            codeOutput.innerHTML = 'Pobieranie...';
            
            for (let i = 0; i < PROXIES.length; i++) {
                try {
                    const response = await fetch(PROXIES[i] + encodeURIComponent(url), {
                        headers: { 'User-Agent': 'Mozilla/5.0' }
                    });
                    const html = await response.text();
                    if (html && html.includes('<')) {
                        colorizeHTML(html);
                        return;
                    }
                } catch (e) {
                    console.log('Proxy ' + i + ' failed');
                }
            }
            
            codeOutput.innerHTML = 'Nie można pobrać strony - spróbuj inny adres';
        }
        
        function colorizeHTML(html) {
            let escaped = html
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;');
            
            // DOCTYPE
            escaped = escaped.replace(/&lt;!DOCTYPE.*?&gt;/gi, m => 
                `<span class="doctype">${m}</span>`);
            
            // Komentarze HTML
            escaped = escaped.replace(/&lt;!--.*?--&gt;/g, m => 
                `<span class="comment">${m}</span>`);
            
            // Komentarze JS (w przybliżeniu)
            escaped = escaped.replace(/\/\/.*?(?=&lt;)/g, m => 
                `<span class="js-comment">${m}</span>`);
            
            // Encje HTML
            escaped = escaped.replace(/&amp;\w+;/g, m => 
                `<span class="entity">${m}</span>`);
            
            // Znaczniki specjalne
            escaped = escaped.replace(/&lt;(script)(.*?)&gt;/gi, (m, tag, attrs) => {
                let coloredAttrs = colorizeAttributes(attrs);
                return `&lt;<span class="script-tag">${tag}</span>${coloredAttrs}&gt;`;
            });
            
            escaped = escaped.replace(/&lt;(\/script)&gt;/gi, m => 
                `&lt;<span class="script-tag">/script</span>&gt;`);
            
            escaped = escaped.replace(/&lt;(style)(.*?)&gt;/gi, (m, tag, attrs) => {
                let coloredAttrs = colorizeAttributes(attrs);
                return `&lt;<span class="style-tag">${tag}</span>${coloredAttrs}&gt;`;
            });
            
            escaped = escaped.replace(/&lt;(\/style)&gt;/gi, m => 
                `&lt;<span class="style-tag">/style</span>&gt;`);
            
            escaped = escaped.replace(/&lt;(link)(.*?)&gt;/gi, (m, tag, attrs) => {
                let coloredAttrs = colorizeAttributes(attrs);
                return `&lt;<span class="link-tag">${tag}</span>${coloredAttrs}&gt;`;
            });
            
            escaped = escaped.replace(/&lt;(meta)(.*?)&gt;/gi, (m, tag, attrs) => {
                let coloredAttrs = colorizeAttributes(attrs);
                return `&lt;<span class="meta-tag">${tag}</span>${coloredAttrs}&gt;`;
            });
            
            // Znaczniki samozamykające
            escaped = escaped.replace(/&lt;(input|br|hr|img|area|base|col|embed|param|source|track|wbr)(.*?)(\/?)&gt;/gi, (m, tag, attrs, close) => {
                let coloredAttrs = colorizeAttributes(attrs);
                return `&lt;<span class="self-closing">${tag}</span>${coloredAttrs}${close}&gt;`;
            });
            
            // Zwykłe znaczniki
            escaped = escaped.replace(/&lt;(\/?)(\w+)(.*?)(\/?)&gt;/g, (m, slash, tag, attrs, selfClose) => {
                let coloredAttrs = colorizeAttributes(attrs);
                return `&lt;${slash}<span class="tag">${tag}</span>${coloredAttrs}${selfClose}&gt;`;
            });
            
            // CSS wewnątrz <style>
            escaped = escaped.replace(/(&lt;style.*?&gt;)([\s\S]*?)(&lt;\/style&gt;)/gi, (m, open, css, close) => {
                let coloredCSS = css
                    .replace(/(\.[\w-]+|\#[\w-]+|[\w-]+)(?=\s*\{)/g, m => `<span class="css-selector">${m}</span>`)
                    .replace(/(\{|\})/g, m => `<span class="css-property">${m}</span>`)
                    .replace(/([\w-]+)(?=\s*:)/g, m => `<span class="css-property">${m}</span>`)
                    .replace(/:(.*?);/g, m => `:<span class="css-value">${m.substring(1, m.length-1)}</span>;`);
                return open + coloredCSS + close;
            });
            
            // JavaScript wewnątrz <script>
            escaped = escaped.replace(/(&lt;script.*?&gt;)([\s\S]*?)(&lt;\/script&gt;)/gi, (m, open, js, close) => {
                let coloredJS = js
                    .replace(/\b(function|if|else|for|while|return|let|const|var|new|this|class|import|export|try|catch|finally)\b/g, m => `<span class="js-keyword">${m}</span>`)
                    .replace(/\b(true|false|null|undefined)\b/g, m => `<span class="js-keyword">${m}</span>`)
                    .replace(/\b(\d+)\b/g, m => `<span class="js-number">${m}</span>`)
                    .replace(/"([^"]*)"/g, m => `<span class="js-string">${m}</span>`)
                    .replace(/'([^']*)'/g, m => `<span class="js-string">${m}</span>`)
                    .replace(/(\+|\-|\*|\/|\=|\=\=|\=\=\=|\!|\!\=|\!\=\=|\&lt;|\&gt;|\&lt;\=|\&gt;\=)/g, m => `<span class="js-operator">${m}</span>`)
                    .replace(/\b([a-zA-Z_$][\w$]*)(?=\s*\()/g, m => `<span class="js-func">${m}</span>`)
                    .replace(/\b([a-zA-Z_$][\w$]*)\b(?!\()/g, m => `<span class="js-var">${m}</span>`);
                return open + coloredJS + close;
            });
            
            // Tekst między znacznikami
            escaped = escaped.replace(/(&gt;)(.*?)(&lt;)/g, (m, close, text, open) => {
                if (text.trim()) {
                    return close + '<span class="text">' + text + '</span>' + open;
                }
                return m;
            });
            
            codeOutput.innerHTML = escaped;
        }
        
        function colorizeAttributes(attrs) {
            // Atrybuty zdarzeń
            attrs = attrs.replace(/(\s+)(on\w+)(\s*=\s*)(&quot;.*?&quot;|'.*?')/g, (m, space, attr, eq, value) => {
                return `${space}<span class="event-attr">${attr}</span>${eq}<span class="value">${value}</span>`;
            });
            
            // Atrybuty data-*
            attrs = attrs.replace(/(\s+)(data-\w+)(\s*=\s*)(&quot;.*?&quot;|'.*?')/g, (m, space, attr, eq, value) => {
                return `${space}<span class="data-attr">${attr}</span>${eq}<span class="value">${value}</span>`;
            });
            
            // Atrybuty aria-*
            attrs = attrs.replace(/(\s+)(aria-\w+)(\s*=\s*)(&quot;.*?&quot;|'.*?')/g, (m, space, attr, eq, value) => {
                return `${space}<span class="aria-attr">${attr}</span>${eq}<span class="value">${value}</span>`;
            });
            
            // Zwykłe atrybuty z wartościami
            attrs = attrs.replace(/(\s+)(\w+)(\s*=\s*)(&quot;.*?&quot;|'.*?')/g, (m, space, attr, eq, value) => {
                return `${space}<span class="attr">${attr}</span>${eq}<span class="value">${value}</span>`;
            });
            
            // Atrybuty bez wartości
            attrs = attrs.replace(/(\s+)(\w+)(?!\s*=)/g, (m, space, attr) => {
                return `${space}<span class="attr">${attr}</span>`;
            });
            
            return attrs;
        }
        
        urlInput.focus();
    </script>
</body>
</html>