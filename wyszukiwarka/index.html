
<!--Należy ustawić Auth 》URL supabase (na localhost: http://localhost:5500)
Site URL: 
https://twoja-domena.pl
Redirect URLs: 
https://twoja-domena.pl
supabase-Project-Authentication-Url configuration-site url-->

<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Logowanie – Supabase</title>

  <style>
    body {
      font-family: Arial, sans-serif;
    }

    .login-button {
      position: fixed;
      top: 20px;
      right: 20px;
      cursor: pointer;
      z-index: 1000;
    }

    .login-button svg {
      width: 32px;
      height: 32px;
      fill: #000;
    }

    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 999;
    }

    .modal-content {
      background: #fff;
      padding: 30px;
      border-radius: 8px;
      text-align: center;
      width: 300px;
    }

    .modal-content input,
    .modal-content button {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      font-size: 16px;
      cursor: pointer;
    }

    .google-button {
      background: #4285F4;
      color: #fff;
      border: none;
    }

    .email-button {
      background: #555;
      color: #fff;
      border: none;
    }
  </style>

  <!-- SUPABASE CDN (PEWNY) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/supabase.min.js"></script>
</head>

<body>

<!-- IKONA LOGOWANIA -->
<div class="login-button" id="loginIcon" onclick="openModal()">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M12 12c2.7 0 4.8-2.1 4.8-4.8S14.7 2.4 12 2.4 7.2 4.5 7.2 7.2 9.3 12 12 12zm0 2.4c-3.2 0-9.6 1.6-9.6 4.8V22h19.2v-2.8c0-3.2-6.4-4.8-9.6-4.8z"/>
  </svg>
</div>

<!-- MODAL -->
<div class="modal" id="loginModal">
  <div class="modal-content">
    <h2>Zaloguj się</h2>

    <input type="email" id="email" placeholder="Email">

    <button class="google-button" onclick="loginGoogle()">
      Kontynuuj z Google
    </button>

    <button class="email-button" onclick="loginWithEmail()">
      Zaloguj się e-mailem
    </button>
  </div>
</div>

<script>
/* ================= SUPABASE ================= */
const supabaseUrl = 'https://tfbqqduxtsacvwfigsvt.supabase.co';
const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRmYnFxZHV4dHNhY3Z3Zmlnc3Z0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY2OTE4NzcsImV4cCI6MjA4MjI2Nzg3N30.PhuNnwzQ8cZW_UyUjCxXaYAj7xCCiTnOJVd4fUtQRD8';

const supabaseClient = supabase.createClient(supabaseUrl, supabaseKey);

/* ================= MODAL ================= */
function openModal() {
  document.getElementById('loginModal').style.display = 'flex';
}

window.onclick = (e) => {
  const modal = document.getElementById('loginModal');
  if (e.target === modal) modal.style.display = 'none';
};

/* ================= LOGOWANIE ================= */
async function loginGoogle() {
  const { error } = await supabaseClient.auth.signInWithOAuth({
    provider: 'google',
    options: {
      redirectTo: window.location.origin
    }
  });

  if (error) alert(error.message);
}

async function loginWithEmail() {
  const email = document.getElementById('email').value;
  if (!email) return alert('Podaj email');

  const { error } = await supabaseClient.auth.signInWithOtp({ email });

  if (error) alert(error.message);
  else {
    alert('Sprawdź email i kliknij link logowania');
    document.getElementById('loginModal').style.display = 'none';
  }
}

/* ================= IKONA UŻYTKOWNIKA ================= */
function updateUserIcon(email) {
  const letter = email.charAt(0).toUpperCase();
  document.getElementById('loginIcon').innerHTML = `
    <div style="
      width:32px;
      height:32px;
      border-radius:50%;
      background:#4285F4;
      color:white;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:bold;">
      ${letter}
    </div>`;
}

/* ================= SESJA ================= */
supabaseClient.auth.onAuthStateChange((event, session) => {
  if (session?.user?.email) {
    updateUserIcon(session.user.email);
    document.getElementById('loginModal').style.display = 'none';
  }
});

(async () => {
  const { data: { session } } = await supabaseClient.auth.getSession();
  if (session?.user?.email) {
    updateUserIcon(session.user.email);
  }
})();
</script>
*/___________________/*

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/supabase.min.js"></script>

<script>
const supabaseUrl = 'https://tfbqqduxtsacvwfigsvt.supabase.co';
const supabaseKey = 'TU_WKLEJ_SWÓJ_SUPABASE_ANON_KEY';
const supabaseClient = supabase.createClient(supabaseUrl, supabaseKey);

// Email login
document.getElementById('emailLoginBtn').addEventListener('click', async () => {
  const email = document.getElementById('email').value;
  if (!email) return alert('Podaj email');

  const { data, error } = await supabaseClient.auth.signInWithOtp({ email });

  if (error) alert('Błąd logowania e-mailem: ' + error.message);
  else alert('Email OK (sprawdź inbox, jeśli Confirm Email ON)');
});

// Google login
document.getElementById('googleLoginBtn').addEventListener('click', async () => {
  const { data, error } = await supabaseClient.auth.signInWithOAuth({
    provider: 'google',
    options: { redirectTo: window.location.origin }
  });

  if (error) alert('Błąd logowania Google: ' + error.message);
  else alert('Google login rozpoczęty, powinno otworzyć okno logowania');
});

// Autorefresh – alert przy zmianie stanu
supabaseClient.auth.onAuthStateChange((event, session) => {
  if(session?.user?.email) {
    alert('Zalogowano jako: ' + session.user.email);
  }
});
</script>
*/---------------- /*
</body>
</html>